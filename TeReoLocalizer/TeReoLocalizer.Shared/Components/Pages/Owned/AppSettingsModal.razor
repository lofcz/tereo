@using TeReoLocalizer.Shared.Code
@inject IJSRuntime Js
@code {
    [Parameter]
    public string Name { get; set; }
    [Parameter]
    public Localize Owner { get; set; }
    [CascadingParameter] 
    BlazingModalInstance BlazoredModal { get; set; } = default!;

    UserSettings settings = new UserSettings();
    
    protected override void OnInitialized()
    {
        base.OnInitialized();
        settings = Owner.Settings.DeepClone();
    }

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
    }

    async Task Submit()
    {
        Owner.Settings = settings;
        await Owner.SaveUserSettings();
        await Cancel();
    }

    async Task Cancel()
    {
        await BlazoredModal.CloseAsync();
    }
}

<EdModal Title="Nastavení aplikace">
    <div style="margin-bottom: 1rem;">
        <div class="form-check">
            <input style="cursor: pointer;" @bind="settings.DisableTips" class="form-check-input" type="checkbox" id="autosave"/>
            <label style="cursor: pointer; user-select: none;" class="form-check-label" for="autosave">Vypnout tipy v aplikaci</label>
        </div>
    </div>
    
    <EdButtonsContainer>
        <EdButton OnClick="Submit">Uložit</EdButton>
        <EdButton OnClick="Cancel" Design="ButtonDesigns.Cancel">Zrušit</EdButton>
    </EdButtonsContainer>
</EdModal>